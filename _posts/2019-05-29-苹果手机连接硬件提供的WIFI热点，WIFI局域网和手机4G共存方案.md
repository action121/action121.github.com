---
layout: post
title: '苹果手机WIFI局域网和手机4G、5G蜂窝网共存方案'
subtitle: 'Multipath TCP'
date: 2019-05-29
categories: Multipath TCP
cover: ''
tags: Multipath TCP
---

## 目标

iPhone手机同时连接`局域网WiFi`和4G、5G等`蜂窝网络`，并且`公网保持畅通`

## 苹果手机能力调研

苹果 [Multipath TCP概念](https://support.apple.com/en-us/HT201373)

苹果社区官方帖子

<a href='https://discussions.apple.com/thread/3703817?tstart=0' target='_blank'>https://discussions.apple.com/thread/3703817?tstart=0</a>

## 验证思路

1. iPhone连接上普通的WiFi，打开该WIFI的详情页面
2. 把IP地址和子网掩码抄下来
3. 配置IP，选择手动模式
4. 把刚才抄下来的IP地址和子网掩码写进去
5. 确保手动模式下的的路由器为空


## 验证过程

### 1、苹果电脑创建WIFI热点

### 2、手机连接该热点

### 3、修改手机相应配置

![](../../../assets/img/15591064490433/15591068203405.jpg)


![](../../../assets/img/15591064490433/15591068413264.jpg)


### 4、在Mac电脑创建一个HTTP服务，用手机通过局域网IP访问


![](../../../assets/img/15591064490433/15591068867015.jpg)




![](../../../assets/img/15591064490433/15591072752821.jpg)


备注:

Android手机一样的设置方法，不过可能要Root。


## 小结

1、iPhone手机同时连接局域网WiFi和4G、5G等蜂窝网络，并且公网保持畅通是可行的

2、验证步骤是自己电脑模拟的，步骤比较繁琐，商用需要简化

商用产品比较成熟的技术手段是：

在路由层面控制，手机连接到WIFI后，路由器不分配路由IP地址。

举个例子：

360行车记录仪，内置WIFI模块。

手机连接到记录仪的WIFI后，手机和记录仪此时已经组成局域网，手机App可以管理记录仪内部存储的照片、视频，同时不影响手机的蜂窝网络正常使用公网。