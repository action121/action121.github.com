---
layout: post
title: 'Xcode 13.3.1 ç¼–è¯‘é—®é¢˜'
subtitle: ''
date: 2022-05-01
categories: Xcode,å·¥ç¨‹æ•ˆç‡,ç¼–è¯‘é—®é¢˜
cover: ''
tags: Xcode,å·¥ç¨‹æ•ˆç‡,ç¼–è¯‘é—®é¢˜
---

# Xcode 13.3.1 ç¼–è¯‘é—®é¢˜

æ–‡æ¡£æ—¥æœŸ 2022-05-01

## ç¼–è¯‘å¤±è´¥

ä¸»APPåœ¨Xcode 13.3.1ç¯å¢ƒä¸‹å­˜åœ¨ç¼–è¯‘é—®é¢˜ã€‚

### å›¾ä¾‹

![](../../../assets/img/16514311167992/16514311979747.png)


å…³é”®è¯

```
'nil' requires a contextual type
```
```
Type 'GWWPostAtModel' does not conform to protocol 'DefaultsSerializable'

Ambiguous inference of associated type 'Bridge': 
'DefaultsCodableBridge<GWWPostAtModel>' vs. 
'DefaultsRawRepresentableBridge<GWWPostAtModel>'
SwiftyUserDefaults/Sources/BuiltIns.swift:59:23: Matching requirement 
'_defaults' to this declaration inferred associated type to 
'DefaultsCodableBridge<GWWPostAtModel>'

SwiftyUserDefaults/Sources/BuiltIns.swift:64:23: Matching requirement 
'_defaults' to this declaration inferred associated type to 
'DefaultsRawRepresentableBridge<GWWPostAtModel>'
```


é€šè¿‡build error ä¿¡æ¯å¯ä»¥çœ‹å‡ºï¼Œåè®®æœ‰é»˜è®¤å®ç°ï¼Œä½†æ˜¯å…³è”ç±»å‹çš„æ¨¡ç³Šæ¨æ–­å†²çªäº†ã€‚

SwiftyUserDefaultså½“å‰ç‰ˆæœ¬ï¼š5.0.0ï¼ŒDefaultsSerializableåè®®çš„é»˜è®¤å®ç°è§ä¸‹å›¾

![](../../../assets/img/16514311167992/16514313855975.png)


## å®˜æ–¹ç¤¾åŒº

ä¸¤ä¸ªå®˜æ–¹éƒ½æœ‰ç›¸å…³issuesï¼Œå…³æ³¨åŠè®¨è®ºæ•°é‡è¾ƒå¤šï¼Œéƒ½æ˜¯Xcode13.3çš„é—®é¢˜ï¼ŒXcode13.2.1åŠä»¥ä¸‹ç¼–è¯‘æ­£å¸¸ã€‚

### SwiftyUserDefaultså®˜æ–¹çš„issue

https://github.com/sunshinejr/SwiftyUserDefaults/issues/285

#### è§£å†³æ–¹æ¡ˆä¸€

![](../../../assets/img/16514311167992/16514314304954.jpg)


#### è§£å†³æ–¹æ¡ˆäºŒ

![](../../../assets/img/16514311167992/16514314502385.jpg)


#### æ³¨æ„äº‹é¡¹

ä¸‹å›¾æ‰€è¿°å†…å®¹ä¸å·¥ç¨‹å®é™…è°ƒè¯•ç›¸ç¬¦ã€‚

ä¸åŒçš„æ¨¡å—ç»„ä»¶ï¼Œå¦‚æœæ¶‰åŠä½¿ç”¨SwiftyUserDefaultséƒ½éœ€è¦åšä»£ç å®ç°ã€‚

ç›¸åŒæ¨¡å—ç»„ä»¶å†…ä»…éœ€è¦ä¸€å¤„ä»£ç å®ç°ã€‚

![](../../../assets/img/16514311167992/16514314853764.jpg)


### swiftå®˜æ–¹çš„issue

  https://github.com/apple/swift/issues/58084#event-6489785930

![](../../../assets/img/16514311167992/16514315314701.jpg)


#### è§£å†³æ–¹æ¡ˆ

æœªè§ç›¸å…³ä¿®æ­£çš„æ›´æ–°ï¼Œä¿æŒå…³æ³¨ã€‚

## APP è§£å†³æ–¹æ¡ˆ

å¯¹ä½¿ç”¨DefaultsSerializableåè®®çš„classã€structåšé»˜è®¤å®ç°ã€‚

ç»è¿‡å¯¹ä¸šåŠ¡ä»£ç çš„æ¢³ç†ï¼Œå‘ç°ä»£ç æ¶‰åŠoptionçš„ä½¿ç”¨ï¼Œä¸ºé˜²æ­¢å‡ºç°æ•°æ®å…¼å®¹æ€§é—®é¢˜ï¼Œä½¿ç”¨ä¸‹å›¾å¤„ç†æ–¹å¼ã€‚

### ç¤ºä¾‹

```

import Foundation
import SwiftyUserDefaults

public struct GWWPostAtModel: Codable, DefaultsSerializable {
    let id: Int?
    let tagName: String?
    let avatar: String?
    let signature: String?
}

/*
   DefaultsSerializableé»˜è®¤å®ç°åœ¨xcode13.3.1ç¯å¢ƒæœ‰bugï¼Œå­˜åœ¨ç¼–è¯‘é—®é¢˜
    https://github.com/sunshinejr/SwiftyUserDefaults/issues/285
    https://github.com/apple/swift/issues/58084#event-6489785930

    DefaultsSerializable start ğŸ‘‡ğŸ»
*/

extension DefaultsSerializable where Self: Codable {
    public typealias Bridge = DefaultsCodableBridge<Self>
    public typealias ArrayBridge = DefaultsCodableBridge<[Self]>
}

extension DefaultsSerializable where Self: RawRepresentable {
    typealias Bridge = DefaultsRawRepresentableBridge<Self>
    typealias ArrayBridge = DefaultsRawRepresentableArrayBridge<[Self]>
}

/*
    DefaultsSerializable end ğŸ‘†ğŸ»
 */

```

### æ¶‰åŠä¿®æ”¹ç‚¹

åŸºäºAPP 1.2.600 åˆ†æ”¯çš„podfileï¼Œåœ¨ devæ¨¡å¼æ‹‰å–ä»£ç ï¼Œä¿®æ”¹ã€‚

æ¶‰åŠçš„åº“åŠç›¸åº”åˆ†æ”¯è§ä¸‹å›¾

![](../../../assets/img/16514311167992/16514316260433.png)



å¦‚ä¸‹å›¾ï¼Œä¿®æ”¹åç¼–è¯‘æˆåŠŸ

![](../../../assets/img/16514311167992/16514319698316.png)


## æ³¨æ„äº‹é¡¹

**APPä¸åŒç‰ˆæœ¬æ˜¯å¦å­˜åœ¨æ•°æ®å…¼å®¹æ€§é—®é¢˜ ï¼Œéœ€è¦ç›¸åº”æ¨¡å—è´Ÿè´£äººè‡ªæŸ¥å¹¶å‘ŠçŸ¥æµ‹è¯•åŒäº‹é‡ç‚¹å›å½’æµ‹è¯•ã€‚**

